name: Fetch or make swift bindings

runs:
  using: composite

  steps:
      - name: fetch uniffi bindgen artifact
        uses: ./.github/actions/make/uniffi-bindgen

      - name: fetch ffi library
        uses: ./.github/actions/make/ffi-library

      - uses: ./.github/actions/make
        with:
          key: bindings-swift-${{ github.sha }}
          make-rule: bindings-swift
          target-path: crypto-ffi/bindings/swift/WireCoreCryptoUniffi/WireCoreCryptoUniffi
